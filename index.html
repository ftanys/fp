<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Success</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 90%;
            max-width: 400px;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            animation: slideUp 0.8s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .success-icon {
            width: 80px;
            height: 80px;
            background: #4CAF50;
            border-radius: 50%;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .checkmark {
            color: white;
            font-size: 40px;
            font-weight: bold;
        }

        h1 {
            color: #333;
            font-size: 28px;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .amount {
            font-size: 48px;
            color: #4CAF50;
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .details {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin: 25px 0;
            border-left: 4px solid #4CAF50;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            font-size: 16px;
        }

        .detail-label {
            color: #666;
            font-weight: 500;
        }

        .detail-value {
            color: #333;
            font-weight: 600;
        }

        .timestamp {
            color: #888;
            font-size: 14px;
            margin-top: 20px;
        }

        .warning-phase, .final-phase {
            display: none;
        }

        .warning-text {
            font-size: 24px;
            color: #ff4757;
            font-weight: bold;
            margin: 30px 0;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .final-text {
            font-size: 20px;
            color: #2f3542;
            font-weight: 600;
            margin: 20px 0;
        }

        .meme-img {
            max-width: 100%;
            width: 300px;
            height: 200px;
            border-radius: 12px;
            margin: 20px 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            object-fit: cover;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 480px) {
            .container {
                padding: 30px 20px;
            }
            .amount {
                font-size: 36px;
            }
            h1 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ç¬¬ä¸€é˜¶æ®µï¼šæ”¯ä»˜æˆåŠŸ -->
        <div class="success-phase">
            <div class="success-icon">
                <div class="checkmark">âœ“</div>
            </div>
            <h1 id="success-title">Payment Successful</h1>
            <div class="amount">$250.00</div>
            <div class="details">
                <div class="detail-row">
                    <span class="detail-label" id="merchant-label">Merchant:</span>
                    <span class="detail-value">Apple Store</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label" id="method-label">Payment Method:</span>
                    <span class="detail-value">â€¢â€¢â€¢â€¢ 4567</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label" id="transaction-label">Transaction ID:</span>
                    <span class="detail-value">#TXN789456123</span>
                </div>
            </div>
            <div class="timestamp" id="timestamp"></div>
        </div>

        <!-- ç¬¬äºŒé˜¶æ®µï¼šè­¦å‘Š -->
        <div class="warning-phase">
            <div class="warning-text" id="warning-text">æ‰«ä»€ä¹ˆç éƒ½åªä¼šå®³äº†ä½ </div>
        </div>

        <!-- ç¬¬ä¸‰é˜¶æ®µï¼šæœ€ç»ˆæç¤º -->
        <div class="final-phase">
            <div class="final-text" id="final-text">è¿™æ¬¡æ˜¯ç©ç¬‘ï¼Œä¸‹æ¬¡å¯å°±ä¸çŸ¥é“æ˜¯ä»€ä¹ˆå’¯ ğŸ˜</div>
            <img class="meme-img" id="meme-img" alt="Meme">
        </div>
    </div>

    <script>
        // æ£€æµ‹ç”¨æˆ·è¯­è¨€
        const userLang = navigator.language || navigator.userLanguage;
        const isZh = userLang.startsWith('zh');
        const isEn = userLang.startsWith('en');
        
        // å¤šè¯­è¨€æ–‡æœ¬
        const translations = {
            en: {
                successTitle: "Payment Successful",
                merchantLabel: "Merchant:",
                methodLabel: "Payment Method:",
                transactionLabel: "Transaction ID:",
                warningText: "Scanning any QR code will only harm you",
                finalText: "This time it's a joke, but next time who knows ğŸ˜"
            },
            zh: {
                successTitle: "æ”¯ä»˜æˆåŠŸ",
                merchantLabel: "å•†å®¶:",
                methodLabel: "æ”¯ä»˜æ–¹å¼:",
                transactionLabel: "äº¤æ˜“ID:",
                warningText: "æ‰«ä»€ä¹ˆç éƒ½åªä¼šå®³äº†ä½ ",
                finalText: "è¿™æ¬¡æ˜¯ç©ç¬‘ï¼Œä¸‹æ¬¡å¯å°±ä¸çŸ¥é“æ˜¯ä»€ä¹ˆå’¯ ğŸ˜"
            },
            ja: {
                successTitle: "æ”¯æ‰•ã„æˆåŠŸ",
                merchantLabel: "åŠ ç›Ÿåº—:",
                methodLabel: "æ”¯æ‰•ã„æ–¹æ³•:",
                transactionLabel: "å–å¼•ID:",
                warningText: "ã©ã‚“ãªQRã‚³ãƒ¼ãƒ‰ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã¦ã‚‚å®³ã«ã—ã‹ãªã‚‰ãªã„",
                finalText: "ä»Šå›ã¯å†—è«‡ã ãŒã€æ¬¡ã¯ä½•ã‹ã‚ã‹ã‚‰ãªã„ ğŸ˜"
            },
            ko: {
                successTitle: "ê²°ì œ ì„±ê³µ",
                merchantLabel: "ê°€ë§¹ì :",
                methodLabel: "ê²°ì œ ìˆ˜ë‹¨:",
                transactionLabel: "ê±°ë˜ ID:",
                warningText: "ì–´ë–¤ QRì½”ë“œë¥¼ ìŠ¤ìº”í•´ë„ í•´ë§Œ ë  ë¿",
                finalText: "ì´ë²ˆì—” ë†ë‹´ì´ì§€ë§Œ, ë‹¤ìŒì—” ë­˜ì§€ ëª¨ë¥´ê² ë„¤ ğŸ˜"
            },
            es: {
                successTitle: "Pago Exitoso",
                merchantLabel: "Comerciante:",
                methodLabel: "MÃ©todo de Pago:",
                transactionLabel: "ID de TransacciÃ³n:",
                warningText: "Escanear cualquier cÃ³digo QR solo te harÃ¡ daÃ±o",
                finalText: "Esta vez es broma, pero la prÃ³xima quiÃ©n sabe ğŸ˜"
            },
            fr: {
                successTitle: "Paiement RÃ©ussi",
                merchantLabel: "Marchand:",
                methodLabel: "MÃ©thode de Paiement:",
                transactionLabel: "ID de Transaction:",
                warningText: "Scanner n'importe quel QR code ne fera que vous nuire",
                finalText: "Cette fois c'est une blague, mais la prochaine qui sait ğŸ˜"
            }
        };

        // é€‰æ‹©è¯­è¨€
        let lang = 'en';
        if (isZh) lang = 'zh';
        else if (userLang.startsWith('ja')) lang = 'ja';
        else if (userLang.startsWith('ko')) lang = 'ko';
        else if (userLang.startsWith('es')) lang = 'es';
        else if (userLang.startsWith('fr')) lang = 'fr';

        const t = translations[lang];

        // é¢„åŠ è½½çš„çŒ«å›¾URL
        let preloadedCatImage = null;
        let isPreloadComplete = false;

        // é¢„åŠ è½½çŒ«å›¾
        function preloadCatImage() {
            console.log('Preloading cat image...');
            
            // ä½¿ç”¨æœ€å¿«æœ€å¯é çš„PlaceKitten API
            const randomId = Math.floor(Math.random() * 1000) + Date.now();
            const catUrl = `https://placekitten.com/300/200?id=${randomId}`;
            
            // åˆ›å»ºé¢„åŠ è½½å›¾ç‰‡å¯¹è±¡
            const preloadImg = new Image();
            preloadImg.crossOrigin = "anonymous";
            
            preloadImg.onload = function() {
                preloadedCatImage = catUrl;
                isPreloadComplete = true;
                console.log('Cat image preloaded successfully:', catUrl);
            };
            
            preloadImg.onerror = function() {
                console.log('PlaceKitten failed, trying Cataas...');
                // å¤‡ç”¨ï¼šå°è¯•Cataas
                const cataasUrl = `https://cataas.com/cat?width=300&height=200&${Date.now()}`;
                const backupImg = new Image();
                
                backupImg.onload = function() {
                    preloadedCatImage = cataasUrl;
                    isPreloadComplete = true;
                    console.log('Backup cat image preloaded:', cataasUrl);
                };
                
                backupImg.onerror = function() {
                    console.log('All cat APIs failed, will use emoji fallback');
                    isPreloadComplete = true;
                    preloadedCatImage = null;
                };
                
                backupImg.src = cataasUrl;
            };
            
            preloadImg.src = catUrl;
        }

        // ä½¿ç”¨é¢„åŠ è½½çš„çŒ«å›¾
        function createRandomMemeImage() {
            const imgElement = document.getElementById('meme-img');
            
            // é‡ç½®æ ·å¼
            imgElement.style.background = '';
            imgElement.style.color = '';
            imgElement.style.textShadow = '';
            imgElement.innerHTML = '';
            imgElement.style.display = 'block';
            
            console.log('Creating meme image. Preload complete:', isPreloadComplete, 'Preloaded URL:', preloadedCatImage);
            
            if (isPreloadComplete && preloadedCatImage) {
                // ä½¿ç”¨é¢„åŠ è½½çš„å›¾ç‰‡
                console.log('Using preloaded cat image');
                imgElement.src = preloadedCatImage;
                imgElement.alt = "Random Cat";
                imgElement.style.objectFit = 'cover';
                
                imgElement.onerror = function() {
                    console.log('Preloaded image failed on display, using fallback');
                    showCatEmojiFallback(imgElement);
                };
                
            } else if (isPreloadComplete && !preloadedCatImage) {
                // é¢„åŠ è½½å®Œæˆä½†å¤±è´¥äº†ï¼Œä½¿ç”¨è¡¨æƒ…ç¬¦å·
                console.log('Preload failed, using emoji fallback');
                showCatEmojiFallback(imgElement);
                
            } else {
                // é¢„åŠ è½½è¿˜æ²¡å®Œæˆï¼Œå°è¯•ç›´æ¥åŠ è½½ä¸€å¼ å›¾ç‰‡
                console.log('Preload not complete, loading image directly');
                const directUrl = `https://placekitten.com/300/200?direct=${Date.now()}`;
                imgElement.src = directUrl;
                imgElement.alt = "Random Cat";
                imgElement.style.objectFit = 'cover';
                
                imgElement.onerror = function() {
                    console.log('Direct load failed, using emoji fallback');
                    showCatEmojiFallback(imgElement);
                };
            }
        }

        // æ˜¾ç¤ºçŒ«å’ªè¡¨æƒ…ç¬¦å·å¤‡ç”¨æ–¹æ¡ˆ
        function showCatEmojiFallback(imgElement) {
            imgElement.style.display = 'none';
            
            const fallbackDiv = document.createElement('div');
            fallbackDiv.style.cssText = `
                width: 300px;
                height: 200px;
                background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-direction: column;
                color: white;
                font-weight: bold;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
                margin: 20px 0;
                box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            `;
            
            const catEmojis = ['ğŸ±', 'ğŸ˜¸', 'ğŸ˜¹', 'ğŸ˜»', 'ğŸ™€', 'ğŸ˜¿', 'ğŸ˜¾'];
            const randomCat = catEmojis[Math.floor(Math.random() * catEmojis.length)];
            
            fallbackDiv.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 10px;">${randomCat}</div>
                <div style="font-size: 18px;">MEOW! GOT YOU!</div>
            `;
            
            imgElement.parentNode.insertBefore(fallbackDiv, imgElement);
        }

        // æ’­æ”¾æ”¯ä»˜æˆåŠŸæç¤ºéŸ³ - æ¨¡æ‹Ÿæ”¯ä»˜å®/å¾®ä¿¡æ”¯ä»˜çš„å£°éŸ³
        async function playNotificationSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // åˆ›å»ºæ”¯ä»˜å®é£æ ¼çš„"å®"å£° - åŒéŸ³è°ƒ
                const createTone = (freq, startTime, duration) => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.setValueAtTime(freq, startTime);
                    gainNode.gain.setValueAtTime(0.3, startTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + duration);
                    
                    oscillator.start(startTime);
                    oscillator.stop(startTime + duration);
                };
                
                // æ”¯ä»˜å®é£æ ¼ï¼šå…ˆé«˜éŸ³åä½éŸ³çš„"å®å’š"
                const now = audioContext.currentTime;
                createTone(800, now, 0.15);      // ç¬¬ä¸€ä¸ªéŸ³ï¼šé«˜éŸ³"å®"
                createTone(600, now + 0.1, 0.2); // ç¬¬äºŒä¸ªéŸ³ï¼šä½éŸ³"å’š"
                
            } catch (e) {
                console.log('Audio Context failed:', e);
                
                // å¤‡ç”¨æ–¹æ¡ˆï¼šä½¿ç”¨HTML5 Audioæ’­æ”¾é¢„è®¾éŸ³é¢‘
                try {
                    // è¿™æ˜¯ä¸€ä¸ªç®€çŸ­çš„WAVéŸ³é¢‘æ•°æ®ï¼Œæ¨¡æ‹Ÿ"å®"å£°
                    const audioData = "data:audio/wav;base64,UklGRjIAAABXQVZFZm10IBAAAAABAAEAgD4AAIA+AAABAAgAZGF0YQ4AAAC4uLi4uLi4uLi4uLi4";
                    const audio = new Audio();
                    audio.volume = 0.7;
                    
                    // åˆ›å»ºå¤šä¸ªéŸ³è°ƒæ¥æ¨¡æ‹Ÿæ”¯ä»˜éŸ³æ•ˆ
                    const playSequence = async () => {
                        // æ’­æ”¾é«˜éŸ³
                        audio.src = audioData;
                        await audio.play().catch(() => {});
                        
                        // çŸ­æš‚å»¶è¿Ÿåæ’­æ”¾ä½éŸ³
                        setTimeout(() => {
                            audio.src = audioData;
                            audio.playbackRate = 0.8; // é™ä½éŸ³è°ƒ
                            audio.play().catch(() => {});
                        }, 100);
                    };
                    
                    playSequence();
                    
                } catch (e2) {
                    // æœ€ç»ˆå¤‡ç”¨ï¼šåœ¨æ§åˆ¶å°æ¨¡æ‹Ÿå£°éŸ³åé¦ˆ
                    console.log('ğŸ”Š Payment Success Sound: DING! ğŸ’°');
                    
                    // è§†è§‰åé¦ˆï¼šè®©æˆåŠŸå›¾æ ‡é—ªçƒ
                    const successIcon = document.querySelector('.success-icon');
                    if (successIcon) {
                        successIcon.style.animation = 'pulse 0.5s ease-in-out 3';
                    }
                }
            }
        }

        // åˆå§‹åŒ–é¡µé¢
        function initPage() {
            // è®¾ç½®æ–‡æœ¬
            document.getElementById('success-title').textContent = t.successTitle;
            document.getElementById('merchant-label').textContent = t.merchantLabel;
            document.getElementById('method-label').textContent = t.methodLabel;
            document.getElementById('transaction-label').textContent = t.transactionLabel;
            
            // è®¾ç½®æ—¶é—´æˆ³
            const now = new Date();
            const timestamp = now.toLocaleString(userLang);
            document.getElementById('timestamp').textContent = timestamp;

            // ç«‹å³å°è¯•æ’­æ”¾å£°éŸ³
            setTimeout(() => {
                playNotificationSound();
            }, 100);
            
            // ç”¨æˆ·äº¤äº’æ—¶ä¹Ÿæ’­æ”¾å£°éŸ³ï¼ˆä»¥é˜²è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼‰
            document.addEventListener('click', playNotificationSound, { once: true });
            document.addEventListener('touchstart', playNotificationSound, { once: true });
        }

        // é˜¶æ®µåˆ‡æ¢
        function showWarningPhase() {
            document.querySelector('.success-phase').classList.add('hidden');
            document.querySelector('.warning-phase').style.display = 'block';
            document.getElementById('warning-text').textContent = t.warningText;
        }

        function showFinalPhase() {
            document.querySelector('.warning-phase').classList.add('hidden');
            document.querySelector('.final-phase').style.display = 'block';
            document.getElementById('final-text').textContent = t.finalText;
            
            // åˆ›å»ºéšæœºæç¬‘å›¾ç‰‡ - ç®€å•å¯é çš„æ–¹å¼
            createRandomMemeImage();
        }

        // å¯åŠ¨åºåˆ—
        initPage();
        
        // ç«‹å³å¼€å§‹é¢„åŠ è½½çŒ«å›¾
        preloadCatImage();

        // 3ç§’åæ˜¾ç¤ºè­¦å‘Š
        setTimeout(showWarningPhase, 3000);

        // 6ç§’åæ˜¾ç¤ºæœ€ç»ˆé˜¶æ®µï¼ˆçŒ«å›¾åº”è¯¥å·²ç»é¢„åŠ è½½å®Œæˆï¼‰
        setTimeout(showFinalPhase, 6000);
    </script>
</body>
</html>
